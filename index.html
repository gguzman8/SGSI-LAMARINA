<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SGSI - Documentos</title>
  <style>
    body{font-family:Inter, Roboto, Arial; margin:0; background:#f6f8fa; color:#111}
    header{background:#1a6b4b;color:white;padding:18px 24px}
    .container{max-width:1000px;margin:20px auto;padding:18px;background:white;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,0.06)}
    nav{display:flex;gap:12px;flex-wrap:wrap}
    nav a{color:white;background:#145938;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:600}
    .logo{height:50px;margin-right:15px}
    h1{margin:0 0 10px 0;font-size:20px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    section{padding:12px}
    .card{border:1px solid #e6e9ef;padding:12px;border-radius:8px;background:#fff}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:8px;border-bottom:1px solid #eef2f6;text-align:left}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:#198754;color:white;text-decoration:none;font-weight:600;border:none;cursor:pointer}
    .btn.secondary{background:#6c757d}
    .small{font-size:13px;color:#444}
    .policy-row{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px;border-radius:8px;border:1px solid #eef2f6;margin-bottom:8px}
    label{display:block;margin-top:8px;font-weight:600}
    input[type=text], textarea, select{width:100%;padding:8px;border-radius:6px;border:1px solid #d7dde6}
    .indicator{display:flex;gap:8px;align-items:center}
    .hallazgo{background:#fff3cd;padding:10px;border-radius:8px;border:1px solid #ffeeba;margin-top:8px}
    footer{font-size:13px;color:#666;margin-top:14px}
    .download-link{display:inline-flex;gap:8px;align-items:center}
  </style>
</head>
<body>
  <header>
    <div style="max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center">
      <div style="display:flex;align-items:center">
        <img src="assets/LAMARINA.png" alt="LA MARINA" class="logo">
        <div>
          <h1>SGSI LA MARINA</h1>
        </div>
      </div>
      <nav>
        <a href="#políticas">Políticas</a>
        <a href="#objetivos">Objetivos</a>
        <a href="#procesos">Procesos</a>
        <a href="#documentos">Descargas</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <div>
        <!-- Políticas -->
        <section id="políticas" class="card">
          <h2>Políticas</h2>
          <p class="small">Su propósito es establecer las reglas y lineamientos que guían la protección de la información y el cumplimiento de los controles de seguridad definidos por la organización.</p>

          <!-- Política 1 -->
          <div class="policy-row">
            <div style="flex:1">
              <strong>POL-01: Política de Seguridad de Datos y Transacciones en eCommerce</strong>
              <div class="small">Proteger los datos personales, financieros y transaccionales de los clientes que interactúan con la tienda en línea, evitando incidentes de seguridad, fraude y uso indebido de la información.</div>
            </div>
            <div style="text-align:right">
              <button class="btn" onclick="showPolicy('POL-01')">Ver / Descargar</button>
            </div>
          </div>

          <!--  Política 2 -->
          <div class="policy-row">
            <div style="flex:1">
              <strong>POL-02: Política de Sincronización e Integridad de Inventarios y Omnicanalidad</strong>
              <div class="small">Garantizar que los inventarios mostrados en la tienda en línea coincidan con los inventarios reales de tiendas físicas, bodegas y sistemas internos, reduciendo errores y pedidos no entregables.</div>
            </div>
            <div style="text-align:right">
              <button class="btn" onclick="showPolicy('POL-02')">Ver / Descargar</button>
            </div>
          </div>

            <!-- Política 3 -->
          <div class="policy-row">
            <div style="flex:1">
              <strong>POL-03:Política de Disponibilidad y Desempeño de Plataformas de eCommerce</strong>
              <div class="small"> Asegurar que la plataforma de comercio electrónico, catálogos, pasarelas y sistemas relacionados operen con altos niveles de disponibilidad, rendimiento y estabilidad.</div>
            </div>
            <div style="text-align:right">
              <button class="btn" onclick="showPolicy('POL-03')">Ver / Descargar</button>
            </div>
          </div>

          <!-- Política 4 -->
          <div class="policy-row">
            <div style="flex:1">
              <strong>POL-04:Política de Logística Digital, Entregas y Seguimiento de Pedidos</strong>
              <div class="small"> Optimizar el proceso logístico digital para garantizar entregas puntuales, trazabilidad completa y comunicación transparente con los clientes.</div>
            </div>
            <div style="text-align:right">
              <button class="btn" onclick="showPolicy('POL-04')">Ver / Descargar</button>
            </div>
          </div>

          <hr/>
          <div id="policyDetail" style="display:none;margin-top:10px">
            <h3 id="policyTitle"></h3>
            <p id="policyDesc" class="small"></p>
            <a id="downloadPolicy" class="btn" href="/mnt/data/matriz de contexto.xlsx" download>Descargar documento relacionado</a>
            <button class="btn secondary" style="margin-left:8px" onclick="closePolicy()">Cerrar</button>
          </div>
        </section>

        <!-- Objetivos -->
        <section id="objetivos" class="card" style="margin-top:12px">
          <h2>Objetivos del SGSI</h2>
          <ol>
            <li><strong>Proteger la información utilizada en los procesos de eCommerce y Marketplace de La Marina:</strong> Salvaguardar los datos críticos de negocio en todas las plataformas digitales.</li>
            <li><strong>Garantizar la confidencialidad, integridad y disponibilidad de los datos de clientes, pedidos, inventarios, transacciones y proveedores:</strong> Mantener los tres pilares fundamentales de la seguridad de la información.</li>
            <li><strong>Asegurar el funcionamiento confiable de las plataformas digitales:</strong> Incluyendo la tienda en línea, integraciones con VTEX, marketplaces y sistemas logísticos.</li>
            <li><strong>Reducir los riesgos tecnológicos:</strong> Mitigar ciberataques, fraude, fallas de plataforma y desincronización de inventarios.</li>
            <li><strong>Establecer controles de seguridad:</strong> Implementar medidas que permitan operaciones digitales estables, seguras y alineadas al negocio.</li>
            <li><strong>Fortalecer la continuidad operativa:</strong> Garantizar que las ventas, envíos y procesos digitales funcionen sin interrupciones significativas.</li>
            <li><strong>Promover la mejora continua:</strong> En los procesos de seguridad, integraciones tecnológicas y servicio al cliente.</li>
          </ol>
          <p class="small">Cada objetivo cuenta con métricas e indicadores asociados que permiten monitorear el cumplimiento y efectividad de los controles implementados.</p>
        </section>

        <!-- Procesos (1 funcional) -->
        <section id="procesos" class="card" style="margin-top:12px">
          <h2>Procesos</h2>
          <div style="margin-top:8px">
            <h3>Proceso: Gestión de Accesos (PROC-ACCESOS)</h3>
            <p><strong>Objetivo del proceso:</strong> Garantizar que los accesos a sistemas se concedan, revisen y revoquen conforme a la política de control de accesos.</p>

            <label>Indicadores del proceso (obligatorio medir):</label>
            <table>
              <thead>
                <tr><th>Indicador</th><th>Descripción</th><th>Meta</th><th>Último valor</th></tr>
              </thead>
              <tbody id="indicatorsTable">
                <tr>
                  <td>% Accesos revisados</td>
                  <td>% de cuentas cuyo acceso fue revisado trimestralmente</td>
                  <td>≥ 95%</td>
                  <td id="val1">88%</td>
                </tr>
                <tr>
                  <td>Tiempo medio de revocación</td>
                  <td>Tiempo (horas) desde solicitud de revocación hasta su implementación</td>
                  <td>≤ 24h</td>
                  <td id="val2">36h</td>
                </tr>
              </tbody>
            </table>

            <div style="margin-top:10px">
              <label for="updateInd">Actualizar indicador (simulación):</label>
              <select id="indSelect">
                <option value="val1">% Accesos revisados</option>
                <option value="val2">Tiempo medio de revocación</option>
              </select>
              <input id="indValue" type="text" placeholder="Nuevo valor (ej. 92% o 12h)">
              <button class="btn" onclick="updateIndicator()">Actualizar</button>
            </div>

            <hr/>

            <h4>Hallazgos (incidencias detectadas)</h4>
            <p class="small">Registra aquí los hallazgos relacionados con el proceso. Deben incluir: descripción, impacto, recomendación y responsable.</p>

            <div>
              <label>Descripción del hallazgo:</label>
              <textarea id="hallazgoDesc" rows="3" placeholder="Ej: Se detectaron cuentas sin revisión por más de 6 meses"></textarea>
              <label>Impacto:</label>
              <input id="hallazgoImpact" type="text" placeholder="Ej: Acceso no justificado a información sensible">
              <label>Recomendación:</label>
              <input id="hallazgoRec" type="text" placeholder="Ej: Forzar revisión y revocación de cuentas inactivas">
              <label>Responsable:</label>
              <input id="hallazgoResp" type="text" placeholder="Ej: Responsable TI">
              <div style="margin-top:8px">
                <button class="btn" onclick="addHallazgo()">Registrar Hallazgo</button>
              </div>
              <div id="hallazgosList"></div>
            </div>
          </div>
        </section>

        <!-- Documentos -->
        <section id="documentos" class="card" style="margin-top:12px">
          <h2>Documentos del SGI</h2>
          <ul>
            <li><strong>Políticas (POL-01, POL-02...)</strong> — Documento central de políticas.</li>
            <li><strong>Objetivos y métricas</strong> — Documento que define metas, indicadores y responsable.</li>
            <li><strong>Registro de hallazgos</strong> — Histórico de hallazgos y acciones correctivas.</li>
          </ul>
          <p class="small">Puedes descargar la matriz de contexto que subiste para integrar: </p>
          <p class="download-link"><a class="btn" href="/mnt/data/matriz de contexto.xlsx" download>Descargar matriz de contexto</a></p>
        </section>
      </div>

      <aside>
        <section class="card">
          <h3>Resumen rápido</h3>
          <p class="small">Implementación mínima basada en ISO 27001: enfocada en documentación, políticas y proceso medible. Recuerda que la norma exige además: definición del alcance, evaluación de riesgos, tratamiento de riesgos y un Statement of Applicability.</p>
          <hr/>
          <h4>Estado</h4>
          <p id="status" class="small">Indicadores con valores de ejemplo. Si un indicador está fuera de objetivo, registrar hallazgo.</p>
          <div style="margin-top:10px">
            <button class="btn" onclick="simulateCheck()">Comprobar Indicadores</button>
          </div>
        </section>

        <section class="card" style="margin-top:12px">
          <h3>Ayuda / Notas</h3>
          <ul class="small">
            <li>Registra evidencia para cada política (firmas, versiones, fecha).</li>
            <li>Mide indicadores periódicamente y actualiza el SoA.</li>
            <li>Revisa Anexo A para decidir controles aplicables.</li>
          </ul>
        </section>
      </aside>
    </div>

    <footer>
    </footer>
  </main>

  <script>
    function showPolicy(key){
      var title = key === 'POL-01' ? 'POL-01: Política de Control de Accesos' : 'POL-02: Política de Gestión de Incidentes';
      var desc = key === 'POL-01' 
        ? 'Esta política define roles, permisos, revisión periódica de accesos y requisitos de autenticación (MFA, least privilege).' 
        : 'Esta política define detección, reporte y la cadena de gestión para respuesta y recuperación de incidentes.';
      document.getElementById('policyTitle').innerText = title;
      document.getElementById('policyDesc').innerText = desc;
      document.getElementById('downloadPolicy').href = '/mnt/data/matriz de contexto.xlsx';
      document.getElementById('policyDetail').style.display = 'block';
      window.location.hash = '#políticas';
    }
    function closePolicy(){
      document.getElementById('policyDetail').style.display = 'none';
    }
    function updateIndicator(){
      var sel = document.getElementById('indSelect').value;
      var val = document.getElementById('indValue').value;
      if(!val){ alert('Ingresa un valor'); return; }
      document.getElementById(sel).innerText = val;
      document.getElementById('status').innerText = 'Indicadores actualizados (simulación). Revisa cumplimiento.';
    }

    function addHallazgo(){
      var d = document.getElementById('hallazgoDesc').value.trim();
      var i = document.getElementById('hallazgoImpact').value.trim();
      var r = document.getElementById('hallazgoRec').value.trim();
      var p = document.getElementById('hallazgoResp').value.trim();
      if(!d || !i || !r || !p){ alert('Completa todos los campos del hallazgo.'); return; }
      var container = document.getElementById('hallazgosList');
      var id = 'H-' + (new Date()).getTime();
      var html = '<div class="hallazgo"><strong>ID: '+id+'</strong><div class="small" style="margin-top:6px"><strong>Descripción:</strong> '+escapeHtml(d)+'</div><div class="small"><strong>Impacto:</strong> '+escapeHtml(i)+'</div><div class="small"><strong>Recomendación:</strong> '+escapeHtml(r)+'</div><div class="small"><strong>Responsable:</strong> '+escapeHtml(p)+'</div></div>';
      container.insertAdjacentHTML('afterbegin', html);
      // Limpiar campos
      document.getElementById('hallazgoDesc').value='';
      document.getElementById('hallazgoImpact').value='';
      document.getElementById('hallazgoRec').value='';
      document.getElementById('hallazgoResp').value='';
      document.getElementById('status').innerText = 'Hallazgo registrado: ' + id;
    }

    function escapeHtml(unsafe) {
      return unsafe.replace(/[&<"'>]/g, function(m) {
        return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m];
      });
    }

    function simulateCheck(){
      // Señala si alguno de los indicadores está fuera de meta (simulación)
      var v1 = document.getElementById('val1').innerText;
      var v2 = document.getElementById('val2').innerText;
      var out = [];
      // parse simple: if percentage <95 mark
      if(v1.indexOf('%')>-1){
        var num = parseFloat(v1.replace('%',''));
        if(num < 95) out.push('% Accesos revisados ('+v1+') < meta (95%)');
      }
      // hours
      if(v2.indexOf('h')>-1){
        var hv = parseFloat(v2.replace('h',''));
        if(hv > 24) out.push('Tiempo medio de revocación ('+v2+') > meta (24h)');
      }
      if(out.length){
        alert('Hay indicadores fuera de meta:\\n - ' + out.join('\\n - '));
      } else {
        alert('Todos los indicadores dentro de meta (simulado).');
      }
    }
  </script>
</body>
</html>
